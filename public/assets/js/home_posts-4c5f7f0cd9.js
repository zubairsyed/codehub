{let t=function(){let t=$("#new-post-form");t.submit((function(l){l.preventDefault(),$.ajax({type:"post",url:"/posts/createPost",data:t.serialize(),success:function(t){let l=e(t.data.post);$("#posts-list-container>ul").prepend(l),console.log($(".delete-post-button",l)),o($(".delete-post-button",l)),n(t.data.post._id),i($(".toggle-like-button",l)),console.log(t),new Noty({theme:"relax",text:"Post Created",type:"success",layout:"topRight",timeout:1e3}).show()},error:function(t){console.log(t.responseText)}})}))},e=function(t){return $(`<li id="post-${t._id}">\n                            <p>           \n                                \n                                <small>\n                                    <a class="delete-post-button" href="/posts/destroy/${t._id}">X</a>\n                                </small>\n                                ${t.content}\n                                <br>\n                                <small>\n                                ${t.user.name}\n                                </small>\n                                <br>\n                                            <small>\n                                                \n                                                    <a id = "toggle-like-id" class="toggle-like-button" data-likes="0" href="/likes/toggle/?id=${t._id}&type=Post">\n                                                        0 Likes\n                                                    </a>\n                                                \n                                            </small>\n\n                            </p>\n                            <div class="post-comments">\n                                    \n                                    <form action="/comments/createComment" id="add-comment-form-${t._id}" method="POST">\n                                        <input type="text" name="content" placeholder="Type here to add comment.." required>\n                                        <input type="hidden" name="post" value="${t._id}">\n                                        <input type="submit" value="Add Comment">\n                                \n                                    </form>\n                                <div class="post-comments-list">\n                                    <ul id="post-comments-${t._id}">\n                                        \n                                    </ul>\n                                </div>\n                            </div>\n                        </li>\n                    `)},o=function(t){console.log("Hello world",t),$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#post-${t.data.postId}`).remove(),new Noty({theme:"relax",text:"Post Deleted",type:"warning",layout:"topRight",timeout:1e3}).show()},error:function(t){console.log(t.responseText)}})}))},n=function(t){let e=$(`post-comments-${t}`);console.log(e);let o=$(`#add-comment-form-${t}`);console.log(o),o.submit((function(e){e.preventDefault(),$.ajax({type:"post",url:"/comments/createComment",data:o.serialize(),success:function(e){console.log(e);let o=l(e.data.comment);$(`#post-comments-${t}`).prepend(o),s($(".delete-comment-button",o)),i($(" .toggle-like-button",o)),new Noty({theme:"relax",text:"Comment published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t)}})}))},l=function(t){return console.log(t.content),console.log(t._id),console.log(t.user.name),$(`<li id = "comment-${t._id}">\n                                <p>\n                                    \n                                <small>\n                                    <a class="delete-comment-button" href="/comments/destroyComment/${t._id}">X</a>\n                                </small>\n                                <p> comment :\n                                    ${t.content}\n                                    <br>\n                                    <small>\n                                        ${t.user.name}\n                                    </small>\n                                    <small>\n                                        <a id = "toggle-like-id" class="toggle-like-button" data-likes="0" href="/likes/toggle/?id=${t._id}&type=Comment">\n                                            0 Likes\n                                        </a>\n                                    </small>\n                                </p>\n                            </p>\n                            </li>`)},s=function(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#comment-${t.data.comment_id}`).remove(),new Noty({theme:"relax",text:"Comment Deleted!",type:"success",layout:"topRight",timeout:1e3}).show()},error:function(t){console.log(t.responseText)}})}))},i=function(t){$(t).click((function(t){t.preventDefault();let e=$(".toggle-like-button");console.log("this home_posts.........",this),$.ajax({type:"POST",url:$(e).attr("href")}).done((function(t){let o=parseInt($(e).attr("data-likes"));console.log(o),1==t.data.deleted?o-=1:o+=1,$(e).attr("data-likes",o),$(e).html(`${o} Likes`)})).fail((function(t){console.log("error in completing the request")}))}))};function convertPosttoAJAX(){$("#posts-list-container > ul >li").each((function(){let t=$(this),e=$(".delete-post-button",t);console.log(e),o(e),console.log("convertpost to ajax **",t);let l=t.prop("id").split("-")[1];console.log(l),$(`#post-comments-${l} > li`).each((()=>{console.log("*under post-comments*",this),s($(".delete-comment-button",this))})),n(l)}))}t(),convertPosttoAJAX()}